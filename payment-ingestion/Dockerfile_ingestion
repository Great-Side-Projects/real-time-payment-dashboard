FROM openjdk:22-jdk-slim

ARG KAFKA_BOOTSTRAP_SERVERS
ARG KAFKA_PROPERTIES_SASL_JAAS_CONFIG

WORKDIR /app

COPY target/*.jar /app/payment-ingestion.jar

EXPOSE 8080

ENV SPRING_KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS} \
    SPRING_KAFKA_PROPERTIES_SASL_JAAS_CONFIG="${KAFKA_PROPERTIES_SASL_JAAS_CONFIG}"

ENTRYPOINT ["java", "-jar", "payment-ingestion.jar"]