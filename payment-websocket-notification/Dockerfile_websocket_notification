FROM openjdk:22-jdk-slim

ARG RABBITMQ_HOST
ARG RABBITMQ_PORT
ARG RABBITMQ_USERNAME
ARG RABBITMQ_PASSWORD

WORKDIR /app

COPY target/*.jar /app/payment-websocket-notification.jar

EXPOSE 8084

ENV SPRING_RABBITMQ_HOST=${RABBITMQ_HOST} \
    SPRING_RABBITMQ_PORT=${RABBITMQ_PORT} \
    SPRING_RABBITMQ_USERNAME=${RABBITMQ_USERNAME} \
    SPRING_RABBITMQ_PASSWORD=${RABBITMQ_PASSWORD}

ENTRYPOINT ["java", "-jar", "payment-websocket-notification.jar"]